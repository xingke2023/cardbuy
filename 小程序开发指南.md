# Cardbase å°ç¨‹åºå¼€å‘æŒ‡å—ï¼ˆç®€åŒ–ç‰ˆï¼‰

## é¡¹ç›®æ¦‚è¿°

Cardbase æ˜¯ä¸€ä¸ªæ•™å¸ˆæœåŠ¡å¹³å°ï¼Œé‡‡ç”¨**æç®€æ··åˆæ¶æ„**ï¼š
- **åç«¯**ï¼šLaravel (API + WebView é¡µé¢)
- **å‰ç«¯**ï¼šå°ç¨‹åºåŸç”Ÿï¼ˆä»…ç™»å½•+æ”¯ä»˜ï¼‰+ WebViewï¼ˆæ‰€æœ‰ä¸šåŠ¡é¡µé¢ï¼‰

## æ¶æ„ä¼˜åŠ¿
âœ… **å¼€å‘å¿«é€Ÿ** - 90% é¡µé¢ç›´æ¥ç”¨ WebView åŠ è½½ï¼Œæ— éœ€é‡å†™
âœ… **ç»´æŠ¤ç®€å•** - åªéœ€ç»´æŠ¤ä¸€å¥— Laravel ä»£ç 
âœ… **ä½“éªŒå®Œæ•´** - æ ¸å¿ƒåŠŸèƒ½ï¼ˆç™»å½•/æ”¯ä»˜ï¼‰ä½¿ç”¨åŸç”Ÿä¿è¯ä½“éªŒ

---

## ä¸€ã€é¡µé¢åˆ†ç±»æ–¹æ¡ˆï¼ˆæç®€ç‰ˆï¼‰

### âœ… åŸç”Ÿå°ç¨‹åºé¡µé¢ï¼ˆä»… 2 ä¸ªï¼‰

| é¡µé¢ | åŸå›  | æŠ€æœ¯æ–¹æ¡ˆ |
|------|------|---------|
| **ç™»å½•/æ³¨å†Œ** | å¯é›†æˆå¾®ä¿¡ä¸€é”®ç™»å½• | è°ƒç”¨ APIï¼š`POST /api/v1/login` |
| **æ”¯ä»˜é¡µé¢** | å¿…é¡»ä½¿ç”¨å°ç¨‹åºæ”¯ä»˜ API | å°ç¨‹åºåŸç”Ÿæ”¯ä»˜ + è°ƒç”¨åç«¯ç¡®è®¤æ¥å£ |

### ğŸŒ WebView é¡µé¢ï¼ˆæ‰€æœ‰ä¸šåŠ¡é¡µé¢ï¼‰

| é¡µé¢ç±»å‹ | ç¤ºä¾‹ | URL æ ¼å¼ |
|---------|------|---------|
| **æ‰€æœ‰åˆ—è¡¨é¡µ** | æ•™å¸ˆåˆ—è¡¨ã€è®¢å•åˆ—è¡¨ã€æœåŠ¡åˆ—è¡¨ | `https://yourdomain.com/teachers?token={token}` |
| **æ‰€æœ‰è¯¦æƒ…é¡µ** | æ•™å¸ˆè¯¦æƒ…ã€è®¢å•è¯¦æƒ…ã€æœåŠ¡è¯¦æƒ… | `https://yourdomain.com/teachers/{id}?token={token}` |
| **æ‰€æœ‰è¡¨å•é¡µ** | åˆ›å»ºè®¢å•ã€ç¼–è¾‘æœåŠ¡ã€ç”³è¯·æ•™å¸ˆ | `https://yourdomain.com/services/create?token={token}` |
| **ä¸ªäººä¸­å¿ƒ** | æˆ‘çš„é¡µé¢ã€ä¸ªäººèµ„æ–™ã€é’±åŒ…ç­‰ | `https://yourdomain.com/my?token={token}` |

**æ ¸å¿ƒæ€è·¯**ï¼šé™¤äº†ç™»å½•å’Œæ”¯ä»˜ï¼Œå…¶ä»–é¡µé¢å…¨éƒ¨é€šè¿‡ WebView ç›´æ¥åŠ è½½ Laravel ç½‘é¡µï¼

---

## äºŒã€API æ¥å£æ–‡æ¡£

### åŸºç¡€é…ç½®

- **Base URL**: `https://yourdomain.com/api/v1`
- **è®¤è¯æ–¹å¼**: Bearer Token (Sanctum)
- **Content-Type**: `application/json`

### 1. è®¤è¯æ¥å£

#### ç™»å½•
```http
POST /api/v1/login
Content-Type: application/json

{
  "email": "teacher1@cardbase.com",
  "password": "password"
}

Response:
{
  "success": true,
  "data": {
    "user": { ... },
    "token": "1|xxxxxxxxxxxxx"
  },
  "message": "ç™»å½•æˆåŠŸ"
}
```

#### æ³¨å†Œ
```http
POST /api/v1/register
Content-Type: application/json

{
  "name": "å¼ ä¸‰",
  "email": "zhangsan@example.com",
  "password": "password123",
  "password_confirmation": "password123"
}
```

#### è·å–å½“å‰ç”¨æˆ·
```http
GET /api/v1/user
Authorization: Bearer {token}
```

#### ç™»å‡º
```http
POST /api/v1/logout
Authorization: Bearer {token}
```

### 2. æ•™å¸ˆæ¥å£

#### è·å–æ•™å¸ˆåˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
```http
GET /api/v1/teachers?page=1&per_page=10&keyword=æœç´¢å…³é”®è¯
```

#### è·å–æ•™å¸ˆè¯¦æƒ…
```http
GET /api/v1/teachers/{id}
```

### 3. è®¢å•æ¥å£

#### åˆ›å»ºè®¢å•
```http
POST /api/v1/orders
Authorization: Bearer {token}
Content-Type: application/json

{
  "service_id": 1,
  "expected_completion_date": "2025-11-15",
  "account_opening_area": "åŒ—äº¬",
  "share_contact_info": true,
  "contact_info": "13800138000",
  "other_requirements": "å…¶ä»–éœ€æ±‚è¯´æ˜"
}
```

#### è·å–æˆ‘çš„è®¢å•åˆ—è¡¨
```http
GET /api/v1/my/orders?page=1
Authorization: Bearer {token}
```

#### è·å–æ•™å¸ˆè®¢å•åˆ—è¡¨
```http
GET /api/v1/my/teacher-orders?page=1
Authorization: Bearer {token}
```

#### è·å–è®¢å•è¯¦æƒ…
```http
GET /api/v1/orders/{id}
Authorization: Bearer {token}
```

#### æ•™å¸ˆæ¥å—è®¢å•
```http
POST /api/v1/orders/{id}/accept
Authorization: Bearer {token}
Content-Type: application/json

{
  "teacher_recommended_bank": "ä¸­å›½é“¶è¡Œ",
  "estimated_online_appointment_time": "2025-11-12 14:00:00",
  "teacher_message": "æˆ‘ä¼šå°½å¿«ä¸ºæ‚¨æœåŠ¡"
}
```

#### æ•™å¸ˆæ‹’ç»è®¢å•
```http
POST /api/v1/orders/{id}/reject
Authorization: Bearer {token}
Content-Type: application/json

{
  "rejection_reason": "æ—¶é—´å†²çªï¼ŒæŠ±æ­‰æ— æ³•æ¥å•"
}
```

#### æ•™å¸ˆå®Œæˆè®¢å•
```http
PATCH /api/v1/orders/{id}/complete
Authorization: Bearer {token}
```

#### ç”¨æˆ·ç¡®è®¤è®¢å•
```http
PATCH /api/v1/orders/{id}/confirm
Authorization: Bearer {token}
```

### 4. æœåŠ¡æ¥å£

#### è·å–æˆ‘çš„æœåŠ¡åˆ—è¡¨
```http
GET /api/v1/my/services
Authorization: Bearer {token}
```

#### åˆ›å»ºæœåŠ¡
```http
POST /api/v1/services
Authorization: Bearer {token}
Content-Type: application/json

{
  "service_type": "å¼€æˆ·æœåŠ¡",
  "service_name": "ç¾è‚¡æ¸¯è‚¡å¼€æˆ·",
  "service_details": "æä¾›ä¸“ä¸šçš„ç¾è‚¡æ¸¯è‚¡å¼€æˆ·æŒ‡å¯¼...",
  "service_amount": 199.00
}
```

#### åˆ‡æ¢æœåŠ¡çŠ¶æ€
```http
PATCH /api/v1/services/{id}/toggle-status
Authorization: Bearer {token}
```

---

## ä¸‰ã€å°ç¨‹åºå®ç°ç¤ºä¾‹ï¼ˆæç®€ç‰ˆï¼‰

### å°ç¨‹åºç›®å½•ç»“æ„
```
miniprogram/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ login/           # ç™»å½•é¡µé¢ï¼ˆåŸç”Ÿï¼‰
â”‚   â”‚   â”œâ”€â”€ index.wxml
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â””â”€â”€ index.wxss
â”‚   â”œâ”€â”€ payment/         # æ”¯ä»˜é¡µé¢ï¼ˆåŸç”Ÿï¼‰
â”‚   â”‚   â”œâ”€â”€ index.wxml
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â””â”€â”€ index.wxss
â”‚   â””â”€â”€ webview/         # WebView é€šç”¨é¡µé¢
â”‚       â”œâ”€â”€ index.wxml
â”‚       â”œâ”€â”€ index.js
â”‚       â””â”€â”€ index.wxss
â”œâ”€â”€ app.js
â”œâ”€â”€ app.json
â””â”€â”€ app.wxss
```

### 1. ç™»å½•é¡µé¢ï¼ˆåŸç”Ÿï¼‰

#### pages/login/index.wxml
```xml
<view class="container">
  <view class="logo">
    <image src="/images/logo.png" mode="aspectFit" />
    <text class="title">Cardbase</text>
  </view>

  <view class="form">
    <input
      class="input"
      placeholder="é‚®ç®±"
      type="text"
      bindinput="onEmailInput"
      value="{{email}}"
    />
    <input
      class="input"
      placeholder="å¯†ç "
      type="password"
      bindinput="onPasswordInput"
      value="{{password}}"
    />

    <button class="btn-login" bindtap="handleLogin" loading="{{loading}}">
      ç™»å½•
    </button>

    <view class="links">
      <text bindtap="goRegister">æ³¨å†Œè´¦å·</text>
      <text bindtap="goForgotPassword">å¿˜è®°å¯†ç </text>
    </view>
  </view>
</view>
```

#### pages/login/index.js
```javascript
const app = getApp()

Page({
  data: {
    email: '',
    password: '',
    loading: false
  },

  onEmailInput(e) {
    this.setData({ email: e.detail.value })
  },

  onPasswordInput(e) {
    this.setData({ password: e.detail.value })
  },

  handleLogin() {
    const { email, password } = this.data

    if (!email || !password) {
      wx.showToast({ title: 'è¯·è¾“å…¥é‚®ç®±å’Œå¯†ç ', icon: 'none' })
      return
    }

    this.setData({ loading: true })

    wx.request({
      url: app.globalData.apiBase + '/login',
      method: 'POST',
      data: { email, password },
      success: (res) => {
        if (res.data.success) {
          const token = res.data.data.token

          // ä¿å­˜ token
          wx.setStorageSync('token', token)
          wx.setStorageSync('user', res.data.data.user)
          app.globalData.token = token

          wx.showToast({ title: 'ç™»å½•æˆåŠŸ', icon: 'success' })

          // è·³è½¬åˆ°é¦–é¡µï¼ˆWebViewï¼‰
          setTimeout(() => {
            wx.redirectTo({
              url: '/pages/webview/index?url=' +
                   encodeURIComponent(app.globalData.webBase + '/?token=' + token)
            })
          }, 1500)
        } else {
          wx.showToast({ title: res.data.message || 'ç™»å½•å¤±è´¥', icon: 'none' })
        }
      },
      fail: () => {
        wx.showToast({ title: 'ç½‘ç»œé”™è¯¯', icon: 'none' })
      },
      complete: () => {
        this.setData({ loading: false })
      }
    })
  },

  goRegister() {
    // æ³¨å†Œä¹Ÿå¯ä»¥ç”¨ WebView
    const url = encodeURIComponent(app.globalData.webBase + '/register')
    wx.navigateTo({
      url: '/pages/webview/index?url=' + url
    })
  },

  goForgotPassword() {
    // å¿˜è®°å¯†ç ç”¨ WebView
    const url = encodeURIComponent(app.globalData.webBase + '/forgot-password')
    wx.navigateTo({
      url: '/pages/webview/index?url=' + url
    })
  }
})
```

### 2. WebView é€šç”¨é¡µé¢ï¼ˆæ ¸å¿ƒï¼‰

#### pages/webview/index.wxml
```xml
<web-view src="{{url}}" bindmessage="handleMessage"></web-view>
```

#### pages/webview/index.js
```javascript
Page({
  data: {
    url: ''
  },

  onLoad(options) {
    this.setData({
      url: decodeURIComponent(options.url)
    })
  },

  // æ¥æ”¶ WebView æ¶ˆæ¯
  handleMessage(e) {
    const data = e.detail.data[0]

    if (data.action === 'navigateBack') {
      wx.navigateBack()
    } else if (data.action === 'pay') {
      // è°ƒç”¨å°ç¨‹åºæ”¯ä»˜
      this.handlePayment(data.orderId)
    }
  },

  handlePayment(orderId) {
    // å®ç°æ”¯ä»˜é€»è¾‘
  }
})
```

### 3. æ”¯ä»˜é¡µé¢ï¼ˆåŸç”Ÿï¼‰

#### pages/payment/index.wxml
```xml
<view class="container">
  <view class="order-info">
    <text class="amount">Â¥{{amount}}</text>
    <text class="desc">{{orderDesc}}</text>
  </view>

  <button class="btn-pay" bindtap="handlePay" loading="{{loading}}">
    ç¡®è®¤æ”¯ä»˜
  </button>
</view>
```

#### pages/payment/index.js
```javascript
const app = getApp()

Page({
  data: {
    orderId: '',
    amount: 0,
    orderDesc: '',
    loading: false
  },

  onLoad(options) {
    this.setData({
      orderId: options.orderId,
      amount: options.amount || 0,
      orderDesc: options.desc || 'è®¢å•æ”¯ä»˜'
    })
  },

  handlePay() {
    this.setData({ loading: true })

    // 1. å‘åç«¯è¯·æ±‚æ”¯ä»˜å‚æ•°
    wx.request({
      url: app.globalData.apiBase + '/payment/prepare',
      method: 'POST',
      header: {
        'Authorization': 'Bearer ' + wx.getStorageSync('token')
      },
      data: {
        order_id: this.data.orderId
      },
      success: (res) => {
        if (res.data.success) {
          // 2. è°ƒç”¨å¾®ä¿¡æ”¯ä»˜
          wx.requestPayment({
            timeStamp: res.data.data.timeStamp,
            nonceStr: res.data.data.nonceStr,
            package: res.data.data.package,
            signType: res.data.data.signType,
            paySign: res.data.data.paySign,
            success: (payRes) => {
              wx.showToast({ title: 'æ”¯ä»˜æˆåŠŸ', icon: 'success' })

              // 3. é€šçŸ¥åç«¯æ”¯ä»˜æˆåŠŸï¼Œè·³è½¬åˆ°è®¢å•è¯¦æƒ…
              setTimeout(() => {
                const url = encodeURIComponent(
                  `${app.globalData.webBase}/orders/${this.data.orderId}?token=${wx.getStorageSync('token')}`
                )
                wx.redirectTo({
                  url: '/pages/webview/index?url=' + url
                })
              }, 1500)
            },
            fail: (err) => {
              if (err.errMsg === 'requestPayment:fail cancel') {
                wx.showToast({ title: 'å·²å–æ¶ˆæ”¯ä»˜', icon: 'none' })
              } else {
                wx.showToast({ title: 'æ”¯ä»˜å¤±è´¥', icon: 'none' })
              }
            }
          })
        } else {
          wx.showToast({ title: 'è·å–æ”¯ä»˜å‚æ•°å¤±è´¥', icon: 'none' })
        }
      },
      fail: () => {
        wx.showToast({ title: 'ç½‘ç»œé”™è¯¯', icon: 'none' })
      },
      complete: () => {
        this.setData({ loading: false })
      }
    })
  }
})
```

### 4. Laravel WebView é¡µé¢é€‚é…ï¼ˆé‡è¦ï¼ï¼‰

åœ¨ Laravel çš„ä¸»å¸ƒå±€æ–‡ä»¶ä¸­æ·»åŠ å°ç¨‹åºé€šä¿¡ä»£ç ï¼š

#### resources/views/layouts/app.blade.php
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ config('app.name') }}</title>

    <!-- å¼•å…¥å¾®ä¿¡ JS-SDK -->
    <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>

    @vite(['resources/css/app.css', 'resources/js/app.js'])
</head>
<body>
    @yield('content')

    <!-- å°ç¨‹åºé€‚é…è„šæœ¬ -->
    <script>
      // æ£€æµ‹æ˜¯å¦åœ¨å°ç¨‹åº WebView ä¸­
      function isInMiniProgram() {
        return window.__wxjs_environment === 'miniprogram'
      }

      // å‘å°ç¨‹åºå‘é€æ¶ˆæ¯
      function postMessageToMiniProgram(data) {
        if (isInMiniProgram()) {
          wx.miniProgram.postMessage({ data: data })
        }
      }

      // è¿”å›æŒ‰é’® - è¿”å›å°ç¨‹åºä¸Šä¸€é¡µ
      function navigateBackToMiniProgram() {
        if (isInMiniProgram()) {
          wx.miniProgram.navigateBack()
        } else {
          window.history.back()
        }
      }

      // è·³è½¬åˆ°æ”¯ä»˜é¡µé¢ï¼ˆå°ç¨‹åºåŸç”Ÿï¼‰
      function goToPayment(orderId, amount, desc) {
        if (isInMiniProgram()) {
          wx.miniProgram.navigateTo({
            url: '/pages/payment/index?orderId=' + orderId +
                 '&amount=' + amount +
                 '&desc=' + encodeURIComponent(desc)
          })
        } else {
          // Web ç«¯æ”¯ä»˜é€»è¾‘
          alert('Web ç«¯æ”¯ä»˜åŠŸèƒ½')
        }
      }

      // è‡ªåŠ¨ç»™æ‰€æœ‰é“¾æ¥æ·»åŠ  token å‚æ•°
      if (isInMiniProgram()) {
        const token = new URLSearchParams(window.location.search).get('token')
        if (token) {
          document.addEventListener('DOMContentLoaded', function() {
            const links = document.querySelectorAll('a')
            links.forEach(link => {
              const href = link.getAttribute('href')
              if (href && !href.startsWith('http') && !href.includes('token=')) {
                const separator = href.includes('?') ? '&' : '?'
                link.setAttribute('href', href + separator + 'token=' + token)
              }
            })
          })
        }

        // éšè—é¡¶éƒ¨å¯¼èˆªæ ï¼ˆå› ä¸ºå°ç¨‹åºæœ‰è‡ªå·±çš„å¯¼èˆªï¼‰
        const style = document.createElement('style')
        style.innerHTML = '.navbar { display: none; }'
        document.head.appendChild(style)
      }
    </script>

    @stack('scripts')
</body>
</html>
```

#### åœ¨éœ€è¦æ”¯ä»˜çš„é¡µé¢ä¸­ä½¿ç”¨ï¼š

```blade
<!-- resources/views/orders/show.blade.php -->
@extends('layouts.app')

@section('content')
<div class="order-detail">
    <h1>è®¢å•è¯¦æƒ…</h1>

    @if($order->status === 'accepted' && !$order->is_paid)
    <button onclick="goToPayment({{ $order->id }}, {{ $order->payment_amount }}, 'è®¢å•æ”¯ä»˜')">
        å»æ”¯ä»˜
    </button>
    @endif

    <button onclick="navigateBackToMiniProgram()">è¿”å›</button>
</div>
@endsection
```

### 4. å…¨å±€é…ç½®

#### app.js
```javascript
App({
  globalData: {
    apiBase: 'https://yourdomain.com/api/v1',
    webBase: 'https://yourdomain.com',
    token: null
  },

  onLaunch() {
    // æ£€æŸ¥ç™»å½•çŠ¶æ€
    const token = wx.getStorageSync('token')
    if (token) {
      this.globalData.token = token
      this.checkToken()
    }
  },

  // éªŒè¯ Token æ˜¯å¦æœ‰æ•ˆ
  checkToken() {
    wx.request({
      url: this.globalData.apiBase + '/user',
      method: 'GET',
      header: {
        'Authorization': 'Bearer ' + this.globalData.token
      },
      fail: () => {
        // Token å¤±æ•ˆï¼Œæ¸…é™¤å¹¶è·³è½¬ç™»å½•
        wx.removeStorageSync('token')
        wx.redirectTo({
          url: '/pages/login/index'
        })
      }
    })
  }
})
```

---

## å››ã€éƒ¨ç½²æ¸…å•

### Laravel åç«¯éƒ¨ç½²

1. **æœåŠ¡å™¨è¦æ±‚**
   - PHP 8.2+
   - MySQL 5.7+
   - Nginx/Apache
   - SSL è¯ä¹¦ï¼ˆå¿…é¡» HTTPSï¼‰

2. **ç¯å¢ƒé…ç½®**
```bash
# 1. ä¸Šä¼ ä»£ç åˆ°æœåŠ¡å™¨
# 2. å®‰è£…ä¾èµ–
composer install --optimize-autoloader --no-dev

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
php artisan key:generate

# 4. è¿è¡Œè¿ç§»
php artisan migrate --force

# 5. åˆ›å»º Sanctum è¡¨
php artisan migrate
```

3. **Nginx é…ç½®ç¤ºä¾‹**
```nginx
server {
    listen 443 ssl http2;
    server_name yourdomain.com;

    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    root /var/www/cardbase/public;
    index index.php;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;
        fastcgi_index index.php;
        include fastcgi_params;
    }
}
```

### å°ç¨‹åºé…ç½®

1. **å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½®**
   - æœåŠ¡å™¨åŸŸåé…ç½®ï¼ˆrequest åŸŸåï¼‰ï¼š`https://yourdomain.com`
   - ä¸šåŠ¡åŸŸåé…ç½®ï¼ˆWebView åŸŸåï¼‰ï¼š`https://yourdomain.com`
   - ä¸‹è½½æ ¡éªŒæ–‡ä»¶å¹¶æ”¾åˆ° Laravel çš„ `public` ç›®å½•

2. **é¡¹ç›®é…ç½® - project.config.json**
```json
{
  "appid": "your_appid",
  "projectname": "cardbase",
  "setting": {
    "urlCheck": true
  }
}
```

---

## äº”ã€å¼€å‘å»ºè®®

### 1. è®¤è¯æµç¨‹
1. å°ç¨‹åºç«¯ï¼šç”¨æˆ·è¾“å…¥é‚®ç®±å¯†ç ç™»å½•
2. è°ƒç”¨ `/api/v1/login` è·å– token
3. å­˜å‚¨ token åˆ°æœ¬åœ°å­˜å‚¨
4. åç»­ API è¯·æ±‚éƒ½å¸¦ä¸Š `Authorization: Bearer {token}`
5. WebView é¡µé¢é€šè¿‡ URL å‚æ•°ä¼ é€’ tokenï¼š`?token={token}`

### 2. é”™è¯¯å¤„ç†
```javascript
// ç»Ÿä¸€é”™è¯¯å¤„ç†å‡½æ•°
function handleApiError(error) {
  if (error.statusCode === 401) {
    // Token å¤±æ•ˆ
    wx.removeStorageSync('token')
    wx.redirectTo({ url: '/pages/login/index' })
  } else {
    wx.showToast({
      title: error.data?.message || 'è¯·æ±‚å¤±è´¥',
      icon: 'none'
    })
  }
}
```

### 3. æ€§èƒ½ä¼˜åŒ–
- æ•™å¸ˆåˆ—è¡¨ä½¿ç”¨åˆ†é¡µåŠ è½½
- å›¾ç‰‡ä½¿ç”¨ CDN
- åˆç†ä½¿ç”¨ç¼“å­˜
- WebView é¡µé¢é¢„åŠ è½½

### 4. ç”¨æˆ·ä½“éªŒ
- æ·»åŠ åŠ è½½æç¤º
- ä¸‹æ‹‰åˆ·æ–°
- ç©ºçŠ¶æ€æç¤º
- ç½‘ç»œå¼‚å¸¸æç¤º

---

## å…­ã€æµ‹è¯•è´¦å·

- **æ™®é€šç”¨æˆ·**: customer@cardbase.com / password
- **æ•™å¸ˆç”¨æˆ·**: teacher1@cardbase.com / passwordï¼ˆéœ€é‡ç½®å¯†ç ï¼‰
- **API Base URL**: https://yourdomain.com/api/v1

---

## ä¸ƒã€å¸¸è§é—®é¢˜

### Q1: WebView æ— æ³•åŠ è½½ï¼Ÿ
A: æ£€æŸ¥åŸŸåæ˜¯å¦é…ç½®åœ¨å°ç¨‹åºåå°çš„"ä¸šåŠ¡åŸŸå"ä¸­ï¼Œå¹¶ç¡®ä¿æ˜¯ HTTPSã€‚

### Q2: API è¯·æ±‚è·¨åŸŸï¼Ÿ
A: Laravel å·²é…ç½® CORSï¼Œæ£€æŸ¥ `config/cors.php` ä¸­ `allowed_origins` æ˜¯å¦åŒ…å«ä½ çš„åŸŸåã€‚

### Q3: Token è®¤è¯å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥è¯·æ±‚å¤´æ˜¯å¦æ­£ç¡®ï¼š`Authorization: Bearer {token}`

### Q4: WebView å’Œå°ç¨‹åºå¦‚ä½•é€šä¿¡ï¼Ÿ
A: ä½¿ç”¨ `wx.miniProgram.postMessage()` å’Œ `wx.miniProgram.navigateTo()`

---

## å…«ã€æç®€å¼€å‘æµç¨‹æ€»ç»“

### ç¬¬ä¸€æ­¥ï¼šéƒ¨ç½² Laravel åˆ°æœåŠ¡å™¨
1. é…ç½® HTTPS åŸŸå
2. ä¸Šä¼ ä»£ç å¹¶é…ç½®ç¯å¢ƒ
3. è¿è¡Œè¿ç§»ï¼š`php artisan migrate`

### ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå°ç¨‹åºï¼ˆåªéœ€ 3 ä¸ªé¡µé¢ï¼‰
```
pages/
â”œâ”€â”€ login/     â† ç™»å½•é¡µé¢ï¼ˆåŸç”Ÿï¼‰
â”œâ”€â”€ payment/   â† æ”¯ä»˜é¡µé¢ï¼ˆåŸç”Ÿï¼‰
â””â”€â”€ webview/   â† æ‰€æœ‰å…¶ä»–é¡µé¢ï¼ˆWebViewï¼‰
```

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®å°ç¨‹åºåŸŸå
- request åˆæ³•åŸŸåï¼š`https://yourdomain.com`
- ä¸šåŠ¡åŸŸåï¼š`https://yourdomain.com`

### ç¬¬å››æ­¥ï¼šæµ‹è¯•æµç¨‹
1. æ‰“å¼€å°ç¨‹åº â†’ ç™»å½•é¡µ
2. ç™»å½•æˆåŠŸ â†’ è·³è½¬åˆ° WebViewï¼ˆLaravel é¦–é¡µï¼‰
3. æ‰€æœ‰æ“ä½œåœ¨ WebView ä¸­å®Œæˆ
4. éœ€è¦æ”¯ä»˜æ—¶ â†’ è·³è½¬åˆ°åŸç”Ÿæ”¯ä»˜é¡µé¢
5. æ”¯ä»˜å®Œæˆ â†’ è¿”å› WebView

## ä¹ã€å¼€å‘æ—¶é—´ä¼°ç®—

| ä»»åŠ¡ | é¢„è®¡æ—¶é—´ |
|------|---------|
| Laravel éƒ¨ç½² | 2-4 å°æ—¶ |
| å°ç¨‹åºç™»å½•é¡µé¢ | 2-3 å°æ—¶ |
| å°ç¨‹åºæ”¯ä»˜é¡µé¢ | 3-4 å°æ—¶ |
| WebView é¡µé¢ | 1 å°æ—¶ |
| Laravel é€‚é…è„šæœ¬ | 1-2 å°æ—¶ |
| æµ‹è¯•è°ƒè¯• | 2-3 å°æ—¶ |
| **æ€»è®¡** | **1-2 å¤©** |

ç›¸æ¯”å®Œå…¨åŸç”Ÿå¼€å‘ï¼ˆéœ€è¦ 2-4 å‘¨ï¼‰ï¼Œæç®€æ–¹æ¡ˆå¯ä»¥ **1-2 å¤©å¿«é€Ÿä¸Šçº¿**ï¼

## åã€å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆè¿™ä¹ˆç®€å•ï¼Ÿ
A: å› ä¸º 90% çš„é¡µé¢ç›´æ¥ç”¨ WebView åŠ è½½ Laravel ç½‘é¡µï¼Œä¸éœ€è¦é‡å†™å‰ç«¯ä»£ç ã€‚

### Q2: WebView ä½“éªŒä¼šå·®å—ï¼Ÿ
A: å¯¹äºå†…å®¹å±•ç¤ºç±»é¡µé¢ï¼ˆåˆ—è¡¨ã€è¯¦æƒ…ï¼‰ï¼ŒWebView ä½“éªŒå®Œå…¨å¤Ÿç”¨ã€‚åªæœ‰é«˜é¢‘äº¤äº’ï¼ˆç™»å½•ã€æ”¯ä»˜ï¼‰æ‰éœ€è¦åŸç”Ÿã€‚

### Q3: å¦‚ä½•è°ƒè¯• WebViewï¼Ÿ
A: å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­å¯ä»¥ç›´æ¥è°ƒè¯• WebViewï¼Œå’Œè°ƒè¯•ç½‘é¡µä¸€æ ·ã€‚

### Q4: åç»­å¯ä»¥æ”¹æˆå…¨åŸç”Ÿå—ï¼Ÿ
A: å¯ä»¥ï¼å…ˆç”¨ WebView å¿«é€Ÿä¸Šçº¿ï¼Œåç»­æœ‰éœ€è¦å¯ä»¥é€æ­¥å°†é¡µé¢æ”¹ä¸ºåŸç”Ÿã€‚

### Q5: éœ€è¦æ”¹åŠ¨ Laravel ä»£ç å—ï¼Ÿ
A: åªéœ€åœ¨å¸ƒå±€æ–‡ä»¶ä¸­åŠ å…¥å°ç¨‹åºé€‚é…è„šæœ¬ï¼Œå…¶ä»–ä»£ç åŸºæœ¬ä¸ç”¨æ”¹ã€‚

---

## æ€»ç»“

**æç®€æ–¹æ¡ˆçš„æ ¸å¿ƒæ€æƒ³**ï¼š
- âœ… åªå¼€å‘ 2 ä¸ªåŸç”Ÿé¡µé¢ï¼šç™»å½• + æ”¯ä»˜
- âœ… å…¶ä»–æ‰€æœ‰é¡µé¢ç”¨ WebView åŠ è½½
- âœ… 1-2 å¤©å¿«é€Ÿä¸Šçº¿
- âœ… åç»­å¯ä»¥é€æ­¥ä¼˜åŒ–

**å¼€å‘æ„‰å¿«ï¼å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥é˜… Laravel å’Œå¾®ä¿¡å°ç¨‹åºå®˜æ–¹æ–‡æ¡£ã€‚**
